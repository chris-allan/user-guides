---
layout: default
title: Using Scripts
menu-id: l1-workflow2
description: Scripts allow additional server-side functionality to be added by users to the OMERO clients.
version:
    - yes
redirect_from:
  - /utility-scripts.html
---

<div class="page-navigation">
<h2>Contents</h2>
<p>
<a href="#introduction">Introduction</a><br />
<a href="#metadata">Populate Metadata Script</a><br />
<a href="#utility">Utility Scripts</a><br />

</p>
</div><!-- End Page Navigation -->

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<h2><a class="anchor" id="introduction"></a>Introduction</h2>

<p>As well as scripts for exporting images and figures, OMERO.insight and OMERO.web also include a scripts menu for additional scripts. OMERO comes with some scripts pre-installed, to add functionality such as the Populate Metadata (under the &#8216;import_scripts&#8217; item in the menu) and &#8216;utility scripts&#8217;. Custom scripts can be installed on the server by the system administrator so they are available to all users. For details see the <a href="https://docs.openmicroscopy.org/latest/omero/developers/scripts/" target="_blank" class="external-url">scripts documentation</a> page.</p>

<p>Click on the <span class="bold">Scripts</span> menu button and select the script to be run from the sub-menu.</p>

<h2>OMERO.insight:</h2>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<img alt="../images/scriptsMenuInsight.jpg" class="align-left" src="images/scriptsMenuInsight.jpg" style="width: 68%;" />

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<h2>OMERO.web:</h2>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<img alt="../images/scriptsMenuWeb.jpg" class="align-center" src="images/scriptsMenuWeb.jpg" style="width: 100%;" />

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<p class="top_link"><a href="#top"><img src="images/back_to_top.png" alt="Image for link to top of page" style="float: right;"/></a></p>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<h2><a class="anchor" id="metadata"></a>Populate Metadata Script</h2>

<p>The Populate Metadata script allows the upload of metadata or analysis results associated with High Content Screening (HCS) data.</p>

<p>The metadata to be uploaded must be in Comma Separated Values format (<span class="code-example">.csv</span>) with a line of entries for each Well in a Plate. The data in the <span class="code-example">.csv</span> must be formatted appropriately, depending on whether it is being used to populate a Screen or a Plate with metadata (see below).</p>

<p>Detailed guidelines can be seen on the <a href="https://docs.openmicroscopy.org/latest/omero/developers/scripts/" target="_blank" class="external-url">scripts documentation</a> page.</p>

<p>Example metadata files for a Screen, <span class="code-example">populateMetadata_example_screen.csv</span>, and a Plate, <span class="code-example">populateMetadata_example_plate.csv</span>, can be downloaded from the OME <a href="https://downloads.openmicroscopy.org/resources/" target="_blank" class="external-url">resources</a> page.</p>

<p>The column headers from the <span class="code-example">.csv</span> become the row titles and the values in each row are read from the row in the <span class="code-example">.csv</span> corresponding with that Well.</p>

<p>To illustrate, a <span class="code-example">.csv</span> file with the contents shown would give a Table on Well A1 as follows (viewed in OMERO.web):</p>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<img alt="../images/scriptsPopulateMetadata.jpg" class="align-center" src="images/scriptsPopulateMetadata.jpg" style="width: 100%;" />

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<h3>Populating a Plate with Metadata or Analysis Results</h3>

<ol class="step">

<li><p class="first">Select the Screen or Plate and attach the metadata <span class="code-example">.csv</span> file to it using the <span class="bold">+</span> button under the Attachments tab.</p>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<img alt="../images/scriptsAddAttachment.jpg" class="align-center" src="images/scriptsAddAttachment.jpg" style="width: 100%;" />

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

</li>

<p class="top_link"><a href="#top"><img src="images/back_to_top.png" alt="Image for link to top of page" style="float: right;"/></a></p>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<li><p class="first">If there is more than one <span class="code-example">.csv</span> file attached to the Screen or Plate, click on the <span class="bold">Select for Script</span> button above the attachments.</p>

<p>Check the checkbox on the <span class="code-example">.csv</span> attachment containing the metadata to be imported.</p>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<h3>OMERO.web</h3>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<img alt="../images/scriptsAttachmentWeb.jpg" class="align-center" src="images/scriptsAttachmentWeb.jpg" style="width: 100%;" />

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<h3>OMERO.insight</h3>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<img alt="../images/scriptsAttachmentInsight.jpg" class="align-center" src="images/scriptsAttachmentInsight.jpg" style="width: 100%;" />

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

</li>

<p class="top_link"><a href="#top"><img src="images/back_to_top.png" alt="Image for link to top of page" style="float: right;"/></a></p>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<li><p class="first">Click on the <span class="bold">Scripts</span> menu button and select <span class="bold">import_scripts > Populate Metadata</span>.</p>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<h3>OMERO.web</h3>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<img alt="../images/scriptsRunWeb.jpg" class="align-center" src="images/scriptsRunWeb.jpg" style="width: 100%;" />

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<h3>OMERO.insight</h3>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<img alt="../images/scriptsRunInsight.jpg" class="align-center" src="images/scriptsRunInsight.jpg" style="width: 100%;" />

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

</li>

<li><p class="first">In the Populate Metadata script window the ID number of the selected Screen or Plate should be in the <span class="bold">IDs</span> text box.</p>

<p>Click <span class="bold">Run Script</span>.</p>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<img alt="../images/scriptsWindow.jpg" class="align-center" src="images/scriptsWindow.jpg" style="width: 100%;" />

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

</li>

<p class="top_link"><a href="#top"><img src="images/back_to_top.png" alt="Image for link to top of page" style="float: right;"/></a></p>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<li><p class="first">When the script has run, in OMERO.web, click on the <span class="bold">Tables</span> accordion tab in the right-hand General pane to view the metadata attached to each Well.</p>

<p>In OMERO.insight the table is shown next to the Plate map at the bottom of the Screens tab in the left-hand pane.</p>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<img alt="../images/scriptsMetadata.jpg" class="align-center" src="images/scriptsMetadata.jpg" style="width: 100%;" />

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

</li>

</ol>

<div class="note">
<p class="note-title">Note</p>
<p class="note-text">A file called <span class="code-example">bulk_annotations</span> will be attached to the Screen or Plate the script was run against. This is the OMERO.table file (PyTable) that contains the annotations for the Wells. This attachment must not be removed or deleted unless you want to remove all the annotations..</p>
</div><!-- End note -->

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<h3>Populating a Screen with Metadata or Analysis Results
</h3>

<p>This is exactly the same procedure as described for the Plate above, but the metadata <span class="code-example">.csv</span> file is attached to a Screen and then used by the script.</p>

<p>If metadata is to be added to several or all Plates in a Screen then a column with the Plate name should be included in the .csv and the metadata will be attached to the Screen.</p>

<p>If metadata is to be added to a single Plate, then the Plate name column can be omitted, and the metadata will be attached to the Plate the metadata <span class="code-example">.csv</span> file is attached to when the script is run.</p>

<p class="top_link"><a href="#top"><img src="images/back_to_top.png" alt="Image for link to top of page" style="float: right;"/></a></p>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<h2><a class="anchor" id="utility"></a>Utility Scripts</h2>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<h3>Channel offsets</h3>

<p><a class="external-url" href="https://downloads.openmicroscopy.org/movies/omero-4-3/mov/ChannelOffsets-4.3.mov">MOVIE: channel offsets demo</a></p>

<p>The Channel Offsets script allows you to apply X, Y and Z offsets to
individual channels in an image, creating a new image in the process.
You can pick which of the channels from the source image to combine in
the new image (up to the first 4 channels). The script can process
several images at once, placing the new images in the same Dataset as
the source images by default, or in a new Dataset if the &#8220;New Dataset
Name&#8221; parameter is filled out.</p>


<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<h3>Dataset to Plate</h3>

<p><a class="external-url" href="https://downloads.openmicroscopy.org/movies/omero-4-3/mov/Dataset_To_Plate-4.3.2.mov">MOVIE: Dataset to Plate demo</a></p>

<p>This script allows you to create a &#8220;Plate&#8221; from an ordered set of images
in a Dataset, assigning images to a row and column based on their
sequence by name. You can arrange images by row or column, choose the
size of the row or column and how they are named.</p>

<p>View the movie above to see a demonstration of this script.</p>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<h3>Combine images</h3>

<div class="figure align-center">
<img alt="Combine\_Images screen-shot" src="images/Combine_Images.png" style="width: 55%;" />


</div><!-- End image -->


<p><a class="external-url" href="https://downloads.openmicroscopy.org/movies/omero-4-3/mov/Combine_Images.mov">MOVIE: Combine Images demo</a>.  Slightly older movie
<a class="external-url" href="https://downloads.openmicroscopy.org/movies/omero-4-2/mov/Scripting1.mov">here</a>.</p>

<p>This script takes a number of single-plane images or image Z-stacks,
identified either by <cite>Image_ID</cite> or by the ID of the Dataset that contains
them. All input images should have the same X, Y and Z dimensions and
are expected to have a single channel and time-point. If you want to use a
subset of the images, choose the &#8220;Filter Names&#8221; option by entering some
text. Only image names that contain this text will be used.</p>

<p>There are 2 alternative methods you can use to define which images are
assigned to which Z, T or C index in the new image and how big the new
dimensions are (see below).</p>

<p>Optionally you can specify colors and names for the channels in the new
image.</p>

<h4>Auto define dimensions</h4>

<p>This option is chosen by default. This method uses the names of each
image to try and identify the Z, T or C index. The user should choose
the naming pattern for each dimension. For example, if you want to
combine images named like these:</p>
<ul class="bullet-list">

<li>image001_C01_Z01.tiff</li>

<li>image001_C01_Z02.tiff</li>
</ul>

<p>you should choose: * Channel Name Pattern: &#8220;_C&#8221; * Z Name Pattern:
&#8220;_Z&#8221; * Time Name Pattern: &#8220;None&#8221; (optional)</p>

<p>If the input images are Z stacks, then the &#8216;Z Name Pattern&#8217; will be
ignored and the Z-size of the first image will be used instead.</p>

<div class="note">
<p class="note-title">Note</p>
<p class="note-text">It is assumed that all images have the same Z size.</p>

</div><!-- End note -->

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<h4>Manually define dimensions</h4>

<p>With this option, the images are combined in the same order that they
appear when sorted alphabetically (default in OMERO.insight). If you want to
stitch the planes in a single dimension (e.g. time) then you only need
to choose &#8220;Time&#8221; as the Dimension 1 value and this will do the job.</p>

<p>If you want to stitch the planes across 2 or more dimensions, you need
to specify the dimensions in the order that they change in the list of
input images. For example, images named like this:</p>

<ul class="bullet-list">

<li>image001_C01_Z01.tiff</li>

<li>image001_C01_Z02.tiff</li>

<li>image001_C01_Z03.tiff</li>

<li>image001_C01-Z04.tiff</li>

<li>image001_C01-Z05.tiff</li>

<li>image001_C02-Z01.tiff</li>

<li>image001_C02-Z02.tiff</li>

<li>image001_C02-Z03.tiff</li>

<li>image001_C02-Z04.tiff</li>

<li>image001_C02-Z05.tiff</li>
</ul>

<p>The first dimension to change is Z (changes between images 1,2,3,4,5 in
the list) and the second dimension to change is Channel (changes between
images 5 and 6).</p>

<p>You must specify the Dimensions that these images represent in the
combined image, in the order that they change in the sorted list. In the
above example, Dimension_1 would be &#8220;Z&#8221;, since this changes first, and
Dimension_2 is &#8220;Channel&#8221;. It is also necessary to specify the Size of
the dimensions. In this case, &#8220;size Z&#8221; is 5 and &#8220;size C&#8221; is 2. It is
possible to omit the size of the last dimension since this can be
calculated by the script.</p>

<p>If the input images are Z stacks, you do not need to specify a Z
dimension (it will be ignored if you do).</p>

<p class="top_link"><a href="#top"><img src="images/back_to_top.png" alt="Image for link to top of page" style="float: right;"/></a></p>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<div class="line-block">
	<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->


<h3>Move Annotations</h3>

<img alt="Move Annotations screen-shot" src="images/scriptsMoveAnnotations.jpg" style="width: 55%;" />

<p>In OMERO 5.3.0 a new UI layout of Plates allowing individual Wells to be annotated has been introduced. Previously you could only
annotate the separate Images within a Well using the OMERO clients.
It is therefore possible that Annotations previously added to Images would be more appropriate if linked
to the Well that contains those Images.</p>

<p>This script allows you to select Screens, Plates or Wells and run the script to move the Annotations
from the Images to their parent Wells. You can choose which Type of Annotations to move (such as Tags) and
Annotations can also be selected by namespace.
You also have the option of whether to remove Annotations from their current Images, or leave
them linked to both the Image AND the Well.</p>

<p>For regular users, only Annotations that <i>you</i> have added to the Images will be moved.
For Admins, Annotations added by all users will be moved and it will appear that those same users
added the Annotations to the Well (ownership of the Well-Annotation link will be the same as the
owner of the Image-Annotation link).</p>

<p class="top_link"><a href="#top"><img src="images/back_to_top.png" alt="Image for link to top of page" style="float: right;"/></a></p>

<div class="line-block">
<div class="line"><br /></div> <!-- end #line -->
</div> <!-- end #line-block -->

<div class="page-end">
	<p>All Tutorial Material is available on line at: <a href="http://help.openmicroscopy.org">help.openmicroscopy.org</a></p>
	<p>The Main OME website is at: <a href="http://www.openmicroscopy.org">www.openmicroscopy.org</a></p>
</div> <!-- end page-end -->

</div><!-- End section -->